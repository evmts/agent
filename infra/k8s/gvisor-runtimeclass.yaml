# gVisor RuntimeClass for workflow runners
# This enables sandboxed execution using gVisor on GKE
# Requires: GKE cluster with gVisor-enabled node pool
#
# Apply with: kubectl apply -f gvisor-runtimeclass.yaml
# Verify with: kubectl get runtimeclass gvisor
apiVersion: node.k8s.io/v1
kind: RuntimeClass
metadata:
  name: gvisor
  labels:
    app: plue
    component: sandbox
handler: gvisor
# Schedule pods only on nodes with gVisor support
scheduling:
  nodeSelector:
    cloud.google.com/gke-sandbox: "true"
  tolerations:
  - key: "sandbox.gke.io/runtime"
    operator: "Equal"
    value: "gvisor"
    effect: "NoSchedule"
